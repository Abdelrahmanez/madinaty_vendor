# Order Management System

## نظرة عامة
نظام إدارة الطلبات الكامل للمطعم مع تحديثات فورية عبر Socket.io وتصميم نظيف وسهل الاستخدام.

## المكونات

### 1. OrderCardItem
**الموقع**: `components/OrderCardItem.js`

**الوصف**: مكون بطاقة يعرض ملخص الطلب مع إمكانية الضغط لفتح التفاصيل.

**الميزات**:
- عرض رقم الطلب والوقت
- حالة الطلب مع ألوان مميزة
- أولوية الطلب (عاجل، عالي، متوسط، منخفض)
- معلومات العميل (الاسم، الهاتف)
- ملخص الأطباق والمبلغ الإجمالي
- طريقة الدفع وعنوان التوصيل
- وقت التوصيل المتوقع

### 2. OrderDetailsModal
**الموقع**: `components/OrderDetailsModal.js`

**الوصف**: نافذة منبثقة تعرض جميع تفاصيل الطلب مع إمكانية اتخاذ إجراءات.

**الميزات**:
- عرض كامل تفاصيل الطلب
- معلومات العميل والتوصيل
- قائمة الأطباق مع الملاحظات
- معلومات الدفع المفصلة
- معلومات السائق (إن وجدت)
- أزرار الإجراءات حسب حالة الطلب

**الإجراءات المتاحة**:
- تأكيد الطلب (pending → confirmed)
- بدء التحضير (confirmed → preparing)
- تحديد الطلب جاهز (preparing → ready)
- إلغاء الطلب (مع تأكيد)

### 3. OrdersList
**الموقع**: `components/OrdersList.js`

**الوصف**: قائمة الطلبات مع فلاتر وتحديث فوري.

**الميزات**:
- عرض جميع الطلبات
- فلاتر حسب الحالة مع العد
- تحديث فوري (pull-to-refresh)
- حالة فارغة عند عدم وجود طلبات
- تكامل مع OrderDetailsModal

## الأنواع والثوابت

### Order Types
**الموقع**: `types/orderTypes.js`

**حالات الطلب**:
- `pending` - في الانتظار
- `confirmed` - مؤكد
- `preparing` - قيد التحضير
- `ready` - جاهز
- `out_for_delivery` - خارج للتوصيل
- `delivered` - تم التوصيل
- `cancelled` - ملغي
- `rejected` - مرفوض

**أولويات الطلب**:
- `low` - منخفض
- `medium` - متوسط
- `high` - عالي
- `urgent` - عاجل

**طرق الدفع**:
- `cash` - نقداً
- `card` - بطاقة ائتمان
- `online` - دفع إلكتروني

## الأدوات المساعدة

### Order Utils
**الموقع**: `utils/orderUtils.js`

**الوظائف**:
- `formatOrderNumber()` - تنسيق رقم الطلب
- `formatCurrency()` - تنسيق العملة
- `calculateOrderTotal()` - حساب المجموع
- `getPriorityColor()` - لون الأولوية
- `canCancelOrder()` - إمكانية الإلغاء
- `canConfirmOrder()` - إمكانية التأكيد
- `canPrepareOrder()` - إمكانية التحضير
- `canMarkAsReady()` - إمكانية تحديد الجاهزية
- `formatOrderDate()` - تنسيق التاريخ
- `formatOrderTime()` - تنسيق الوقت

## Hook إدارة الطلبات

### useOrders
**الموقع**: `hooks/useOrders.js`

**الميزات**:
- إدارة حالة الطلبات
- تكامل Socket.io للتحديثات الفورية
- استماع لأحداث الطلبات الجديدة
- استماع لتحديثات الحالة
- استماع لإلغاء الطلبات
- تحديث فوري للواجهة
- رسائل تنبيه مناسبة

**الأحداث المدعومة**:
- `new_order` - طلب جديد
- `order_updated` - تحديث الطلب
- `order_cancelled` - إلغاء الطلب
- `order_status_changed` - تغيير الحالة

## التكامل مع الشاشة الرئيسية

### Home Screen
**الموقع**: `features/home/screens/homeScreen/index.js`

**الميزات**:
- عرض حالة المطعم
- قائمة الطلبات الحالية
- تحديث فوري
- تنبيهات مناسبة

## مبادئ SOLID المطبقة

### 1. Single Responsibility Principle (SRP)
- كل مكون له مسؤولية واحدة واضحة
- `OrderCardItem` - عرض ملخص الطلب
- `OrderDetailsModal` - عرض التفاصيل والإجراءات
- `OrdersList` - إدارة القائمة والفلترة

### 2. Open/Closed Principle (OCP)
- النظام قابل للتوسيع بدون تعديل
- إضافة حالات طلب جديدة
- إضافة إجراءات جديدة
- إضافة فلاتر جديدة

### 3. Liskov Substitution Principle (LSP)
- جميع المكونات قابلة للاستبدال
- واجهات موحدة للطلبات
- أنواع بيانات متسقة

### 4. Interface Segregation Principle (ISP)
- واجهات صغيرة ومتخصصة
- `onPress` للبطاقات
- `onStatusUpdate` للتحديث
- `onCancelOrder` للإلغاء

### 5. Dependency Inversion Principle (DIP)
- الاعتماد على التجريدات
- Hook `useOrders` لإدارة البيانات
- Store `useAlertStore` للتنبيهات
- Theme `useTheme` للألوان

## التصميم والتفاعل

### UI/UX Features
- **تصميم نظيف**: ألوان متناسقة وأيقونات واضحة
- **تفاعل سهل**: ضغط بسيط لفتح التفاصيل
- **تنبيهات مفيدة**: رسائل واضحة لكل إجراء
- **فلترة ذكية**: تصفية حسب الحالة مع العد
- **تحديث فوري**: Socket.io للتحديثات المباشرة
- **حالات التحميل**: مؤشرات واضحة للعمليات

### User Actions
- **عرض الطلبات**: قائمة منظمة مع معلومات أساسية
- **فتح التفاصيل**: نافذة شاملة مع جميع المعلومات
- **تحديث الحالة**: أزرار واضحة حسب الحالة الحالية
- **إلغاء الطلب**: تأكيد مزدوج لتجنب الأخطاء
- **تحديث فوري**: سحب للأسفل للتحديث

## التثبيت والإعداد

### المتطلبات
```bash
npm install socket.io-client
```

### الاستخدام
```jsx
import { OrdersList } from '../../../orders/components';
import { useOrders } from '../../../orders/hooks/useOrders';

const { orders, updateOrderStatus, cancelOrder } = useOrders();

<OrdersList
  orders={orders}
  onStatusUpdate={updateOrderStatus}
  onCancelOrder={cancelOrder}
/>
```

## التطوير المستقبلي

### الميزات المقترحة
- إشعارات push للطلبات الجديدة
- تقارير وإحصائيات الطلبات
- إدارة المخزون المتكاملة
- نظام تقييم العملاء
- تكامل مع أنظمة الدفع
- دعم الطلبات المجدولة

### التحسينات التقنية
- اختبارات وحدة شاملة
- تحسين الأداء للقوائم الكبيرة
- دعم الوضع غير المتصل
- تزامن البيانات
- أمان إضافي للعمليات الحساسة
